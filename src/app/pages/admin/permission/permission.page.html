<ion-content #IonContent [fullscreen]="true" [scrollEvents]="true">
  <ion-spinner name="crescent" color="primary" class="content-spinner" [ngClass]="{'show-spinner': !roles }"></ion-spinner>

  <div class="main-container">
    <ion-title size="large" color="primary" class="main-title">
      <ion-icon [name]="nav.permission.icon + '-outline'" color="secondary"></ion-icon>
      <ion-label>{{nav.permission.title}}</ion-label>
    </ion-title>

    <div class="main-body">
      <ion-grid slot="content">
        <ion-row [ngClass]="{'grid-content-edit': formRoles.value.editRoleId }">
          <ion-col>
            <h1 *ngIf="!formRoles.value.editRoleId">Criar nova permissão:</h1>
            <h1 *ngIf="formRoles.value.editRoleId">Editar a permissão <strong>{{formRoles.value.editRoleId}}</strong>:</h1>
          </ion-col>
        </ion-row>
        <ion-row class="grid-content" [ngClass]="{'grid-content-edit': formRoles.value.editRoleId }">
          <form name="roles" [formGroup]="formRoles" (submit)="showConfirmAlert(formRoles.value.editRoleId ? 'editar' : 'criar', formRoles.value)">
            <ion-input type="hidden" formControlName="editRoleId"></ion-input>
            <ion-col size="5">
              <ion-item>
                <ion-label position="floating">Nome</ion-label>
                <ion-input type="text" formControlName="newRoleName"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="5">
              <ion-item>
                <ion-label position="floating">Nível</ion-label>
                <ion-input type="number" min="0" max="100" formControlName="newRoleLevel"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="2">
              <ion-button size="default" *ngIf="!formRoles.value.editRoleId" title="Criar" color="success" type="submit" [disabled]="formRoles.status === 'INVALID'">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button size="default" *ngIf="formRoles.value.editRoleId" title="Editar" color="warning" type="submit" [disabled]="formRoles.status === 'INVALID'">
                <ion-icon name="create-outline"></ion-icon>
              </ion-button>
              <ion-button size="default" *ngIf="!formRoles.value.editRoleId && !formRoles.pristine" title="Limpar" color="medium" type="button" (click)="showConfirmAlert('limpar', formRoles.value)">
                <ion-icon name="backspace-outline"></ion-icon>
              </ion-button>
              <ion-button size="default" *ngIf="formRoles.value.editRoleId" title="Limpar" color="danger" type="button" (click)="showConfirmAlert('descartar', formRoles.value)">
                <ion-icon name="close-circle-outline"></ion-icon>
              </ion-button>
            </ion-col>
          </form>
        </ion-row>

        <ion-row><ion-col><br></ion-col></ion-row>

        <ion-row *ngIf="roles">
          <ion-col><h1>Permissões:</h1></ion-col>
        </ion-row>
        <ion-row *ngIf="roles" class="grid-header">
          <ion-col size="4"><ion-label>Id</ion-label></ion-col>
          <ion-col size="3"><ion-label>Nome</ion-label></ion-col>
          <ion-col size="3"><ion-label>Nível</ion-label></ion-col>
          <ion-col size="2"><ion-label>Ação</ion-label></ion-col>
        </ion-row>
        <ion-row *ngFor="let role of roles" class="grid-content">
          <ion-col size="4"><ion-label>{{role._id}}</ion-label></ion-col>
          <ion-col size="3"><ion-label>{{role.name}}</ion-label></ion-col>
          <ion-col size="3"><ion-label>{{role.level}}</ion-label></ion-col>
          <ion-col size="2">
            <ion-button size="small" title="Editar" color="warning" (click)="editRole(role)">
              <ion-icon name="create-outline"></ion-icon>
            </ion-button>
            <ion-button size="small" title="Excluir" color="danger" (click)="showConfirmAlert('excluir', role)">
              <ion-icon name="trash-outline"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

  </div>

</ion-content>
