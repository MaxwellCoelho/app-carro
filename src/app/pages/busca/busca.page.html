<ion-content [fullscreen]="true">
  <app-loader [showLoader]="showLoader"></app-loader>

  <div class="main-container">
    <ion-title size="large" color="primary" class="main-title">
      <ion-icon [name]="nav.search.icon + '-outline'" color="secondary"></ion-icon>
      <ion-label>{{nav.search.title}}</ion-label>
    </ion-title>

    <div class="main-body">
      <ion-searchbar *ngIf="!selectedBrand" mode="ios" placeholder="Digite o nome da marca" (ionInput)="searchBrandInput($event)"></ion-searchbar>

      <ion-list *ngIf="!selectedBrand">
        <ion-item *ngIf="!filteredBrands?.length" lines="none">
          <ion-icon name="alert-circle" color="medium" size="large" class="brand-image"></ion-icon>
          <br>
          <ion-label color="medium">Não encontramos a marca que você procura!</ion-label>
        </ion-item>

        <ion-item *ngFor="let brand of filteredBrands" (click)="selectBrand(brand)" button>
          <img src="assets/brands/{{brand.image}}" title="{{brand.name}}" alt="{{brand.name}}"
            onerror="if (this.src != 'error.jpg') this.src = 'assets/no-img.svg'" class="brand-image">
          <ion-label>{{brand.name}}</ion-label>
        </ion-item>
      </ion-list>

      <ion-item lines="none" *ngIf="selectedBrand">
        <img src="assets/brands/{{selectedBrand.image}}" title="{{selectedBrand.name}}" alt="{{selectedBrand.name}}"
          onerror="if (this.src != 'error.jpg') this.src = 'assets/brands/no-brand.svg'" class="brand-image-title">
        <ion-label class="brand-label-title">{{selectedBrand.name}}</ion-label>
        <ion-button size="default" title="Alterar marca" color="primary" type="button" (click)="clearBrand(brand)">
          <ion-icon slot="start" [name]="'chevron-back-outline'"></ion-icon>
          <ion-label slot="end">Alterar marca</ion-label>
        </ion-button>
      </ion-item>

      <ion-searchbar *ngIf="selectedBrand" mode="ios" placeholder="Digite o nome do modelo" (ionInput)="searchModelInput($event)"></ion-searchbar>

      <ion-list *ngIf="selectedBrand">
        <ion-item *ngIf="!filteredModels?.length" lines="none">
          <ion-icon name="alert-circle" color="medium" size="large" class="brand-image"></ion-icon>
          <br>
          <ion-label color="medium">Não encontramos o modelo que você procura!</ion-label>
        </ion-item>

        <ion-item *ngFor="let model of filteredModels" (click)="selectModel(model)" button>
          <img src="assets/models/{{model.thumb}}" title="{{model.name}}" alt="{{model.name}}"
            onerror="if (this.src != 'error.jpg') this.src = 'assets/no-img.svg'" class="model-image">
          <ion-label>{{model.name}}</ion-label>
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>
